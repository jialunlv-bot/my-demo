<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IHS AI Feature Configuration Portal</title>
    <style>
        :root { --shopee-orange: #EE4D2D; --bg: #F6F6F6; --border: #E8E8E8; --text: #333; --gray-text: #888; --v1-blue: #4A90E2; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px;}
        
        nav { background: white; padding: 15px 40px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .logo { color: var(--shopee-orange); font-size: 20px; font-weight: bold; }
        
        .container { max-width: 1000px; margin: 30px auto; padding: 0 20px; }
        .card { background: white; border-radius: 8px; padding: 24px; box-shadow: 0 2px 12px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        /* List UI */
        .feature-item { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid var(--border); }
        .btn-text { color: var(--shopee-orange); cursor: pointer; font-weight: 600; text-decoration: none; border: 1px solid var(--shopee-orange); padding: 5px 15px; border-radius: 4px; font-size: 13px; transition: 0.2s; }
        .btn-text:hover { background: var(--shopee-orange); color: white; }

        /* Dashboard UI */
        .section-header { font-weight: bold; font-size: 14px; margin: 25px 0 15px 0; color: #555; display: flex; align-items: center; gap: 8px;}
        .section-header::before { content: ""; width: 4px; height: 14px; background: var(--shopee-orange); display: inline-block;}
        
        .traffic-control { background: #fafafa; padding: 20px; border-radius: 8px; margin-bottom: 25px;}
        .slider-wrapper { display: flex; align-items: center; gap: 20px; margin-top: 10px; }
        input[type=range] { flex-grow: 1; accent-color: var(--shopee-orange); cursor: pointer; }

        .dual-charts { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .chart-box { border: 1px solid var(--border); padding: 15px; border-radius: 6px; background: white; }
        .svg-chart { width: 100%; height: 80px; margin-top: 10px; }
        .chart-axis { display: flex; justify-content: space-between; color: #BBB; font-size: 10px; margin-top: 5px; }

        /* Editor UI */
        .collapsible { background-color: #f9f9f9; color: #444; cursor: pointer; padding: 15px; width: 100%; border: 1px solid var(--border); text-align: left; outline: none; font-size: 14px; border-radius: 4px; font-weight: bold; display: flex; justify-content: space-between; margin-top: 10px;}
        .collapsible:after { content: '\002B'; color: #777; font-weight: bold; }
        .active:after { content: "\2212"; }
        .content { padding: 0 18px; max-height: 0; overflow: hidden; transition: max-height 0.2s ease-out; background-color: white; border: 0px solid var(--border); }

        .prompt-full-structure { padding: 20px 0; line-height: 1.6; font-size: 13px; color: #666; }
        .fixed-text { color: #888; }
        .editable-zone { border: 1px dashed var(--shopee-orange); padding: 12px; margin: 10px 0; background: #fffaf9; }
        textarea { width: 100%; border: none; outline: none; font-family: 'Courier New', monospace; font-size: 13px; color: var(--shopee-orange); background: transparent; resize: vertical; min-height: 100px; }

        /* Metrics UI */
        .metrics-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 10px; }
        .metric-card { background: #fdfdfd; border: 1px solid #f0f0f0; padding: 12px; border-radius: 4px; text-align: center; }
        .m-title { font-size: 10px; color: #999; text-transform: uppercase; font-weight: bold;}
        .m-value { font-size: 16px; font-weight: bold; color: #444; }

        .btn-primary { background: var(--shopee-orange); color: white; border: none; padding: 12px 25px; border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 20px;}
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <div class="logo">IHS AI Feature Configuration Portal</div>
</nav>

<div class="container">
    
    <div id="page-1">
        <div class="card">
            <h2>Feature Configuration List</h2>
            <div class="feature-item">
                <div><strong>Case Summary</strong><br><small style="color:#999">Summarizes user chats for agent handovers</small></div>
                <div class="btn-text" onclick="loadFeature('Case Summary')">View Detail</div>
            </div>
            <div class="feature-item">
                <div><strong>Internal Note</strong><br><small style="color:#999">Drafts context-aware internal escalation notes</small></div>
                <div class="btn-text" onclick="loadFeature('Internal Note')">View Detail</div>
            </div>
            <div class="feature-item">
                <div><strong>AI Polish</strong><br><small style="color:#999">Ensures tone consistency in customer replies</small></div>
                <div class="btn-text" onclick="loadFeature('AI Polish')">View Detail</div>
            </div>
        </div>
    </div>

    <div id="page-2" class="hidden">
        <div style="margin-bottom: 20px;"><span style="color:var(--shopee-orange); cursor:pointer;" onclick="showPage(1)">‚Üê Back to List</span></div>
        
        <div class="card">
            <h2 id="feature-title">Feature Configuration</h2>
            
            <div class="traffic-control">
                <div class="section-header" style="margin-top: 0;">A/B Test Traffic Distribution Control</div>
                <div class="slider-wrapper">
                    <span style="color: var(--v1-blue); font-weight: bold;">Prompt V1: <span id="v1-label">50</span>%</span>
                    <input type="range" min="0" max="100" value="50" oninput="updateTraffic(this.value)">
                    <span style="color: var(--shopee-orange); font-weight: bold;">Prompt V2: <span id="v2-label">50</span>%</span>
                </div>
            </div>

            <div class="dual-charts">
                <div class="chart-box">
                    <div class="section-header" style="margin-top:0">V1 Adoption Rate</div>
                    <svg class="svg-chart" viewBox="0 0 100 40" preserveAspectRatio="none">
                        <path id="path-v1" d="M0,30 Q25,28 50,32 T100,30" fill="none" stroke="var(--v1-blue)" stroke-width="2" />
                    </svg>
                    <div class="chart-axis"><span>7 Days Ago</span><span>Today</span></div>
                </div>
                <div class="chart-box">
                    <div class="section-header" style="margin-top:0">V2 Adoption Rate</div>
                    <svg class="svg-chart" viewBox="0 0 100 40" preserveAspectRatio="none">
                        <path id="path-v2" d="M0,35 Q25,30 50,20 T100,5" fill="none" stroke="var(--shopee-orange)" stroke-width="2" />
                    </svg>
                    <div class="chart-axis"><span>7 Days Ago</span><span>Today</span></div>
                </div>
            </div>

            <div class="section-header">Full Prompt Structure Configuration</div>
            
            <button class="collapsible">Full Prompt Structure - Version 1 (V1)</button>
            <div class="content">
                <div class="prompt-full-structure">
                    <div class="fixed-text" id="v1-fixed-top">...loading...</div>
                    <div class="editable-zone">
                        <textarea id="v1-editable">...loading...</textarea>
                    </div>
                    <div class="fixed-text" id="v1-fixed-bottom">...loading...</div>
                </div>
            </div>

            <button class="collapsible">Full Prompt Structure - Version 2 (V2)</button>
            <div class="content">
                <div class="prompt-full-structure">
                    <div class="fixed-text" id="v2-fixed-top">...loading...</div>
                    <div class="editable-zone">
                        <textarea id="v2-editable">...loading...</textarea>
                    </div>
                    <div class="fixed-text" id="v2-fixed-bottom">...loading...</div>
                </div>
            </div>

            <div class="section-header">Standardized Performance Monitoring Module</div>
            <div class="metrics-grid">
                <div class="metric-card"><div class="m-title">Daily Adoption</div><div class="m-value" id="m-adoption" style="color:var(--shopee-orange)">0%</div></div>
                <div class="metric-card"><div class="m-title">Avg Latency</div><div class="m-value" id="m-latency">0ms</div></div>
                <div class="metric-card"><div class="m-title">Token Cost</div><div class="m-value" id="m-cost">$0.00</div></div>
                <div class="metric-card"><div class="m-title">Success Rate</div><div class="m-value" id="m-success">0%</div></div>
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="btn-primary" onclick="alert('Configuration Saved & Deployed')">Save and Apply Changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    const featureData = {
        'Case Summary': {
            v1_editable: '- "User Type": Buyer/Seller\n- "Enquiry Type": General Tags\n- "Order SN": Order ID Mapping',
            v2_editable: '- "User Type": Localized Market Role\n- "Enquiry Type": Market Specific Classification\n- "Sentiment": Regional Tone Logic (MY Context)',
            top: 'user-customer service conversations@var={case_log}\n1. Produce an overall outline...\n2. Key items extraction:',
            bottom: '3. Market language understanding...\n4. Summarize each conversation...\n[end of rules]',
            charts: { v1: "M0,30 Q25,28 50,32 T100,30", v2: "M0,35 Q25,30 50,20 T100,5" },
            metrics: { adoption: '22.4%', latency: '840ms', cost: '$0.004', success: '99.1%' }
        },
        'Internal Note': {
            v1_editable: '- "Reason for Escalation": Standard reason\n- "History": Previous actions taken',
            v2_editable: '- "Escalation Context": Local escalation codes\n- "Agent Advice": Specific handoff instructions for MY team',
            top: 'internal_escalation_data@var={escalation_log}\nGenerate an internal note for the next tier agent:',
            bottom: 'Ensure tone is professional and concise.\n[end of rules]',
            charts: { v1: "M0,20 Q25,20 50,20 T100,20", v2: "M0,35 Q25,32 50,28 T100,22" },
            metrics: { adoption: '15.8%', latency: '620ms', cost: '$0.002', success: '98.5%' }
        },
        'AI Polish': {
            v1_editable: '- "Tone": Professional\n- "Politeness": Standard level',
            v2_editable: '- "Tone": Friendly and helpful (Localized)\n- "Cultural Nuance": Use local greetings (e.g., Salam, Hi)',
            top: 'agent_draft_reply@var={draft_text}\nRewrite the draft to improve clarity and tone:',
            bottom: 'Keep the original intent unchanged.\n[end of rules]',
            charts: { v1: "M0,15 Q25,18 50,15 T100,18", v2: "M0,25 Q25,15 50,10 T100,8" },
            metrics: { adoption: '31.2%', latency: '450ms', cost: '$0.001', success: '99.8%' }
        }
    };

    function loadFeature(name) {
        const data = featureData[name];
        document.getElementById('feature-title').innerText = name + " Configuration";
        
        // Load Prompts
        document.getElementById('v1-fixed-top').innerText = data.top;
        document.getElementById('v2-fixed-top').innerText = data.top;
        document.getElementById('v1-fixed-bottom').innerText = data.bottom;
        document.getElementById('v2-fixed-bottom').innerText = data.bottom;
        document.getElementById('v1-editable').value = data.v1_editable;
        document.getElementById('v2-editable').value = data.v2_editable;

        // Load Charts
        document.getElementById('path-v1').setAttribute('d', data.charts.v1);
        document.getElementById('path-v2').setAttribute('d', data.charts.v2);

        // Load Metrics
        document.getElementById('m-adoption').innerText = data.metrics.adoption;
        document.getElementById('m-latency').innerText = data.metrics.latency;
        document.getElementById('m-cost').innerText = data.metrics.cost;
        document.getElementById('m-success').innerText = data.metrics.success;

        showPage(2);
    }

    function showPage(num) {
        document.getElementById('page-1').classList.add('hidden');
        document.getElementById('page-2').classList.add('hidden');
        document.getElementById('page-' + num).classList.remove('hidden');
        window.scrollTo(0,0);
    }

    function updateTraffic(val) {
        document.getElementById('v1-label').innerText = 100 - val;
        document.getElementById('v2-label').innerText = val;
    }

    var coll = document.getElementsByClassName("collapsible");
    for (var i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = "1000px"; // Large enough for content
            } 
        });
    }
</script>

</body>
</html>
